---
import { getCollection, getEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
    const posts = await getCollection('blog');
    return posts.map((post) => ({
        params: { slug: post.id },
        props: { post },
    }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
  <article class="post-article">
    <header class="post-header">
      <h1>{post.data.title}</h1>
      <p class="post-meta">Por {post.data.author} — {post.data.date.toDateString()}</p>
      {post.data.tags && (
        <div class="tags">
          {post.data.tags.map(tag => <span class="tag">{tag}</span>)}
        </div>
      )}
      <a href="/blog/" class="back-link">← Volver al blog</a>
    </header>

    <div class="post-content card">
      <Content />
    </div>
  </article>
</Layout>

<style>
  :root { --accent: #7c3aed; --muted: #6b7280; }
  .post-article { max-width: 900px; margin: 1.5rem auto; padding: 0 1rem; }

  .post-header { margin-bottom: 1rem; text-align:left; }
  .post-header h1 { font-size:2rem; margin:0 0 .4rem 0; color:#e6eef8; }
  .post-meta { color:var(--muted); margin:0 0 .6rem 0; }

  .tags { display:flex; gap:.5rem; margin-bottom:.75rem; flex-wrap:wrap; }
  .tag { background: linear-gradient(90deg,var(--accent), #a78bfa); color:white; padding:6px 10px; border-radius:999px; font-weight:600; font-size:0.85rem; }

  .back-link { display:inline-block; margin-top:.5rem; color:var(--accent); text-decoration:none; font-weight:600; }

  .card { background:white; padding:1.25rem 1.5rem; border-radius:12px; box-shadow:0 12px 36px rgba(2,6,23,0.06); color:#0f172a; border:1px solid rgba(15,23,42,0.04); }

  .post-content { font-size:1.05rem; line-height:1.75; }
  .post-content h2 { color:#0f172a; margin-top:2rem; margin-bottom:1rem; }
  .post-content h3 { color:#0f172a; margin-top:1.5rem; margin-bottom:.75rem; }
  .post-content p { margin-bottom:1rem; }

  .post-content pre { background:#0b1220; color:#e6eef8; padding:1rem; border-radius:8px; overflow:auto; }
  .post-content code { background:#f3f4f6; padding:2px 6px; border-radius:6px; }

  blockquote { border-left:4px solid var(--accent); padding-left:1rem; color:var(--muted); font-style:italic; }

  @media (max-width:720px) {
    .post-header h1 { font-size:1.6rem; }
  }
</style>